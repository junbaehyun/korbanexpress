<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ“¦ KORBAN EXPRESS íŠ¹ì†¡ ìš”ê¸ˆ ê³„ì‚°ê¸°</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f4f4f4;
      padding: 40px;
      display: flex;
      justify-content: center;
    }

    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      width: 100%;
      max-width: 700px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    }

    h2 {
      text-align: center;
      margin-bottom: 30px;
    }

    label {
      font-weight: bold;
      display: block;
      margin-top: 10px;
    }

    input {
      padding: 10px;
      width: 100%;
      margin-bottom: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    .box-group {
      border: 1px solid #ddd;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
      background-color: #fafafa;
    }

    #result, #quote {
      margin-top: 20px;
      font-weight: bold;
      background: #f0f0f0;
      padding: 20px;
      border-radius: 8px;
      white-space: pre-wrap;
    }

    .rate-table {
  margin-top: 30px;
  background: #fffdf5;
  border: 1px solid #ccc;
  padding: 20px;
  border-radius: 10px;
  max-height: 300px;
  overflow-y: auto;
  font-size: 14px;
  line-height: 1.6;
}
.rate-table h3 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 18px;
}
  </style>
</head>
<body>
  <div class="container">
    <h2>ğŸ“¦ KORBAN EXPRESS íŠ¹ì†¡ ìš”ê¸ˆ ê³„ì‚°ê¸° (í•¸ë“œìºë¦¬)</h2>

    <label for="boxCount">ë°•ìŠ¤ ê°œìˆ˜:</label>
    <input type="number" id="boxCount" min="1" value="1" />

    <div id="boxInputs"></div>

    <div id="result"></div>
    <div id="quote"></div>
    <div id="rateTable" class="rate-table"></div>
  </div>

  <script>
    const rates = [
      { weight: 0.5, price: 64400 }, { weight: 1, price: 77200 },
      { weight: 1.5, price: 88100 }, { weight: 2, price: 99100 },
      { weight: 2.5, price: 110000 }, { weight: 3, price: 120800 },
      { weight: 3.5, price: 131800 }, { weight: 4, price: 142800 },
      { weight: 4.5, price: 153700 }, { weight: 5, price: 164600 },
      { weight: 5.5, price: 175000 }, { weight: 6, price: 185500 },
      { weight: 6.5, price: 195800 }, { weight: 7, price: 206200 },
      { weight: 7.5, price: 216600 }, { weight: 8, price: 227100 },
      { weight: 8.5, price: 237500 }, { weight: 9, price: 247800 },
      { weight: 9.5, price: 258200 }, { weight: 10, price: 268800 },
      { weight: 11, price: 289400 }, { weight: 12, price: 309900 },
      { weight: 13, price: 330400 }, { weight: 14, price: 351100 },
      { weight: 15, price: 371600 }, { weight: 16, price: 392500 },
      { weight: 17, price: 413300 }, { weight: 18, price: 434100 },
      { weight: 19, price: 454900 }, { weight: 20, price: 475700 },
      { weight: 21, price: 496300 }, { weight: 22, price: 516800 },
      { weight: 23, price: 537400 }, { weight: 24, price: 558000 },
      { weight: 25, price: 578600 }, { weight: 26, price: 598900 },
      { weight: 27, price: 619200 }, { weight: 28, price: 639500 },
      { weight: 29, price: 659900 }, { weight: 30, price: 680200 },
      { weight: 31, price: 705900 }, { weight: 32, price: 725700 },
      { weight: 33, price: 745600 }, { weight: 34, price: 765300 },
      { weight: 35, price: 785100 }, { weight: 36, price: 805000 },
      { weight: 37, price: 824600 }, { weight: 38, price: 844400 },
      { weight: 39, price: 864300 }, { weight: 40, price: 884100 }
    ];

    const boxInputsContainer = document.getElementById('boxInputs');
    const resultDiv = document.getElementById('result');
    const quoteDiv = document.getElementById('quote');
    const boxCountInput = document.getElementById('boxCount');

    boxCountInput.addEventListener('input', generateBoxInputs);

    function generateBoxInputs() {
      const count = parseInt(boxCountInput.value);
      boxInputsContainer.innerHTML = '';

      for (let i = 0; i < count; i++) {
        const box = document.createElement('div');
        box.className = 'box-group';
        box.innerHTML = `
          <h4>ğŸ“¦ ë°•ìŠ¤ ${i + 1}</h4>
          <label>ì‹¤ë¬´ê²Œ (kg):</label>
          <input type="number" class="weight" step="0.1" />
          <label>ê°€ë¡œ (cm):</label>
          <input type="number" class="width" />
          <label>ì„¸ë¡œ (cm):</label>
          <input type="number" class="length" />
          <label>ë†’ì´ (cm):</label>
          <input type="number" class="height" />
        `;
        boxInputsContainer.appendChild(box);
      }

      document.querySelectorAll('input').forEach(input => {
        input.addEventListener('input', calculateTotal);
      });

      calculateTotal();
    }

    function calculateTotal() {
      const weights = document.querySelectorAll('.weight');
      const widths = document.querySelectorAll('.width');
      const lengths = document.querySelectorAll('.length');
      const heights = document.querySelectorAll('.height');

      let totalChargeableWeight = 0;
      let boxCount = weights.length;
      let customerQuote = `ğŸ“¬ ê³ ê° ë°œì†¡ìš© ê²¬ì ì„œ\n\n`;
      let internalReport = `ğŸ“„ KORBAN EXPRESS íŠ¹ì†¡ ìš”ìœ¨ ì‚°ì¶œ ê·¼ê±°ì„œ (í•¸ë“œìºë¦¬)\n\n`;

      internalReport += `1. ê¸°ë³¸ ì •ë³´\n----------------------------------\n`;
      internalReport += `ê³ ê°ëª…         : [ê³ ê° ì„±í•¨ ë˜ëŠ” íšŒì‚¬ëª…]\n`;
      internalReport += `ë‹´ë‹¹ì         : [ë‹´ë‹¹ ì§ì› ì´ë¦„]\n`;
      internalReport += `ì¶œë°œì§€         : [ì˜ˆ: ì„œìš¸]\n`;
      internalReport += `ë„ì°©ì§€         : [ì˜ˆ: ë°©ê¸€ë¼ë°ì‹œ ë‹¤ì¹´]\n`;
      internalReport += `ìˆ˜ì¶œì¼ì       : [YYYY-MM-DD]\n`;
      internalReport += `ìƒí’ˆëª…/í’ˆëª©    : [ì˜ˆ: ì˜ë¥˜, ê¸°ê³„ ë¶€í’ˆ ë“±]\n`;
      internalReport += `ë°•ìŠ¤ ê°œìˆ˜      : ${boxCount}\n\n`;
      internalReport += `2. ë°•ìŠ¤ë³„ ì‚°ì¶œ ë‚´ì—­\n----------------------------------\n`;

      for (let i = 0; i < boxCount; i++) {
        const w = parseFloat(weights[i].value) || 0;
        const width = parseFloat(widths[i].value) || 0;
        const length = parseFloat(lengths[i].value) || 0;
        const height = parseFloat(heights[i].value) || 0;

        const volWeight = (width * length * height) / 5000;
        const chargeable = Math.max(w, volWeight);
        totalChargeableWeight += chargeable;

        internalReport += `[ë°•ìŠ¤ ${i + 1}]\n`;
        internalReport += ` - ì‹¤ì œë¬´ê²Œ: ${w.toFixed(2)} kg\n`;
        internalReport += ` - CBM ê³„ì‚°ì‹: (${width} Ã— ${length} Ã— ${height}) Ã· 5000 = ${volWeight.toFixed(2)} kg\n`;
        internalReport += ` - ì²­êµ¬ë¬´ê²Œ: ${chargeable.toFixed(2)} kg\n\n`;
      }

      totalChargeableWeight = Math.ceil(totalChargeableWeight * 10) / 10;
      const matchedRate = rates.find(rate => rate.weight >= totalChargeableWeight);

      if (matchedRate) {
        customerQuote += `ì´ ë°•ìŠ¤ ìˆ˜: ${boxCount}ê°œ\n`;
        customerQuote += `ì²­êµ¬ë¬´ê²Œ: ${totalChargeableWeight.toFixed(1)} kg\n`;
        customerQuote += `ì˜ˆìƒ ìš´ì„: ${matchedRate.price.toLocaleString()} ì› (VAT ë³„ë„)\n`;
        customerQuote += `ë°°ì†¡ ë°©ì‹: í•¸ë“œìºë¦¬ íŠ¹ì†¡\n`;

        internalReport += `3. ì²­êµ¬ ê¸°ì¤€ ë° ìš”ê¸ˆ\n----------------------------------\n`;
        internalReport += `- ì´ ì²­êµ¬ë¬´ê²Œ: ${totalChargeableWeight.toFixed(1)} kg\n`;
        internalReport += `- ìš”ìœ¨ ê¸°ì¤€ êµ¬ê°„: ${matchedRate.weight}kg \n`;
        internalReport += `- ì ìš© ìš´ì„ ë‹¨ê°€: ${matchedRate.price.toLocaleString()} ì› (VAT ë³„ë„)\n`;
        internalReport += `- í• ì¸/ì¡°ì • ì—¬ë¶€: ì—†ìŒ\n\n`;

        internalReport += `4. ë¹„ê³ \n----------------------------------\n`;
        internalReport += `- í•¸ë“œìºë¦¬ íŠ¹ì†¡ ê¸°ì¤€ ìš”ìœ¨ ì ìš©\n`;
        internalReport += `- ê³ ê° ìš”ì²­ì‚¬í•­ ì—†ìŒ\n`;
        internalReport += `- ì†¡ì¥ ë° ì¶œê³  í›„ íšŒì‹  ì˜ˆì •\n\n`;

        internalReport += `5. ê²°ì¬\n----------------------------------\n`;
        internalReport += `ì‘ì„±ì: ____________________\n`;
        internalReport += `ê²€í† ì: ____________________\n`;
        internalReport += `ìŠ¹ì¸ì: ____________________\n`;
        internalReport += `ì¼ì:   [YYYY-MM-DD]\n`;
      } else {
        customerQuote += `â— ìš”ê¸ˆí‘œì— í•´ë‹¹í•˜ëŠ” ë¬´ê²Œê°€ ì—†ìŠµë‹ˆë‹¤.\n`;
        internalReport += `âš ï¸ ìš”ê¸ˆí‘œ ë²”ìœ„ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.\n`;
      }

      resultDiv.textContent = customerQuote;
      quoteDiv.textContent = internalReport;

      
    }

    generateBoxInputs();

    function renderRateTable() {
  const rateDiv = document.getElementById('rateTable');
  let tableText = `<h3>ğŸ“Š ìš”ìœ¨ ê¸°ì¤€í‘œ (ë‹´ë‹¹ììš©)</h3>`;
  tableText += `<pre>`;
  rates.forEach(rate => {
    tableText += ` - ${rate.weight.toFixed(1)} kg : ${rate.price.toLocaleString()} ì›\n`;
  });
  tableText += `</pre>`;
  rateDiv.innerHTML = tableText;
}

renderRateTable();
  </script>
</body>
</html>
